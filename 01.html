<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Playlist with Selectable Videos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #playlist {
            list-style: none;
            padding: 0;
        }
        #playlist li {
            margin: 10px 0;
            cursor: pointer;
            color: #007BFF;
        }
        iframe {
            width: 100%;
            max-width: 800px; /* å¢åŠ æœ€å¤§å¯¬åº¦ä»¥ä¿æŒæ¯”ä¾‹ */
            height: 450px;    /* å¯æ ¹æ“š max-width èª¿æ•´ */
            border: none;
        }
    </style>
</head>
<body>
    <h1>ğŸµ æˆ‘çš„ YouTube æ’­æ”¾æ¸…å–®</h1>
    <p>é»æ“Šå½±ç‰‡æ¨™é¡Œé¸æ“‡æ’­æ”¾å½±ç‰‡ã€‚</p>
    
    <iframe id="player" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

    <ul id="playlist"></ul>

    <script>
        // YouTube æ’­æ”¾æ¸…å–®ID
        const playlistId = 'PLC8vgi_QnOIgbDqP9vqnXrhElrPtYdj7O';
        
        // YouTube API éµ (éœ€è¦æ›¿æ›æˆä½ è‡ªå·±çš„ API éµ)
        const apiKey = 'AIzaSyCopIkakFHTPq6Z6IfjVLylfNBHvKRGstk'; // è«‹å‹™å¿…æ›¿æ›æˆä½ è‡ªå·±çš„æœ‰æ•ˆ API é‡‘é‘°

        // é€™è£¡æ˜¯ä½¿ç”¨ YouTube API è¼‰å…¥æ’­æ”¾æ¸…å–®è³‡æ–™
        function loadPlaylist() {
            const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=10&playlistId=${playlistId}&key=${apiKey}`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        // å¦‚æœ API å›æ‡‰ä¸æˆåŠŸï¼Œæ‹‹å‡ºéŒ¯èª¤ï¼Œä¸¦åŒ…å«ç‹€æ…‹ç¢¼
                        return response.json().then(err => { throw new Error(`API Error (${response.status}): ${err.error.message}`); });
                    }
                    return response.json();
                })
                .then(data => {
                    const playlist = data.items;
                    const playlistElement = document.getElementById('playlist');
                    playlistElement.innerHTML = ''; // æ¸…ç©ºç›®å‰æ¸…å–®
                    
                    if (playlist && playlist.length > 0) {
                        // é è¨­æ’­æ”¾æ¸…å–®ä¸­çš„ç¬¬ä¸€å€‹å½±ç‰‡
                        if (playlist[0].snippet && playlist[0].snippet.resourceId && playlist[0].snippet.resourceId.videoId) {
                            playVideo(playlist[0].snippet.resourceId.videoId, false); // åˆå§‹è¼‰å…¥æ™‚ä¸è‡ªå‹•æ’­æ”¾ï¼Œé™¤éä½ å¸Œæœ›
                        }

                        playlist.forEach(item => {
                            if (item.snippet && item.snippet.resourceId && item.snippet.resourceId.videoId) {
                                const videoTitle = item.snippet.title;
                                const videoId = item.snippet.resourceId.videoId;

                                // å‰µå»ºæ¸…å–®é …ç›®
                                const li = document.createElement('li');
                                li.textContent = videoTitle;
                                li.onclick = () => playVideo(videoId, true); // é»æ“Šæ™‚æ’­æ”¾å½±ç‰‡ (ä¸¦è‡ªå‹•æ’­æ”¾)
                                playlistElement.appendChild(li);
                            } else {
                                console.error('å½±ç‰‡è³‡æ–™ä¸å®Œæ•´ï¼Œç„¡æ³•è¼‰å…¥:', item);
                            }
                        });
                    } else {
                        playlistElement.innerHTML = '<li>æ’­æ”¾æ¸…å–®ç‚ºç©ºæˆ–ç„¡æ³•è¼‰å…¥ã€‚</li>';
                    }
                })
                .catch(error => {
                    console.error('Error loading playlist:', error);
                    const playlistElement = document.getElementById('playlist');
                    playlistElement.innerHTML = `<li>è¼‰å…¥æ’­æ”¾æ¸…å–®å¤±æ•—: ${error.message}</li>`;
                    // å¯èƒ½çš„éŒ¯èª¤æç¤ºï¼šæª¢æŸ¥ API é‡‘é‘°æ˜¯å¦æœ‰æ•ˆã€æ’­æ”¾æ¸…å–® ID æ˜¯å¦æ­£ç¢ºï¼Œä»¥åŠ API æ˜¯å¦å·²å•Ÿç”¨ã€‚
                });
        }

        // æ›´æ–° YouTube æ’­æ”¾å™¨çš„å½±ç‰‡
        function playVideo(videoId, shouldAutoplay = true) { // æ–°å¢ shouldAutoplay åƒæ•¸
            const player = document.getElementById('player');
            let videoSrc = `https://www.youtube.com/embed/${videoId}`;
            if (shouldAutoplay) {
                videoSrc += '?autoplay=1';
            }
            player.src = videoSrc;
        }

        // è¼‰å…¥æ’­æ”¾æ¸…å–®
        loadPlaylist();
    </script>
</body>
</html>
